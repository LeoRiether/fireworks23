(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[1],{

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! exports provided: init_clock, date */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"init_clock\", function() { return init_clock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"date\", function() { return date; });\n/* harmony import */ var fireworks23__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fireworks23 */ \"./node_modules/.pnpm/file+..+pkg/node_modules/fireworks23/fireworks23.js\");\n\n\nconsole.log(\"[JS] initializing fireworks23\");\n\nlet fireworks = fireworks23__WEBPACK_IMPORTED_MODULE_0__[\"Fireworks\"].new();\n// app.ticker.add(_ => fireworks.tick());\n\nconst loop = () => {\n    fireworks.tick();\n    requestAnimationFrame(loop);\n};\nrequestAnimationFrame(loop);\n\nwindow.addEventListener(\"click\", e => {\n    fireworks.push_lerper(e.clientX, e.clientY, null, 1.0);\n});\n\n////////////////////////////////////////////////////////////////////\n\n// Thanks, StackOverflow\n// and past me (https://github.com/LeoRiether/Fireworks2019.5JS/blob/master/countdown.js)\nlet offset = 0;\n\nconst worldTimeAPI = {\n    url: \"https://worldtimeapi.org/api/timezone/Etc/UTC\",\n    timeParam: \"utc_datetime\",\n};\n\nconst worldClockAPI = {\n    url: \"http://worldclockapi.com/api/json/utc/now\",\n    timeParam: \"currentDateTime\",\n};\n\nconst anotherWorldTimeAPI = {\n    url: \"https://myworldtimeapi.herokuapp.com/Antarctica/Troll\",\n    timeParam: \"utc_datetime\",\n};\n\nconst getOffsetWith = API => new Promise((res, rej) => {\n    let xhr = new XMLHttpRequest();\n    xhr.open(\"GET\", API.url);\n    xhr.responseType = 'json';\n\n    xhr.onload = () => {\n        let server = new Date(xhr.response[API.timeParam]);\n        res(server - new Date());\n    };\n\n    xhr.onerror = rej;\n\n    xhr.send();\n});\n\nconst getOffset = () =>\n    getOffsetWith(anotherWorldTimeAPI)\n        .catch(() => {\n            console.log(\"myworldtimeapi query failed! Trying worldclocktime instead\");\n            return getOffsetWith(worldTimeAPI);\n        })\n        .catch(() => {\n            console.log(\"worldtimeapi query failed! Trying worldclockapi instead\");\n            return getOffsetWith(worldClockAPI);\n        });\n\nfunction init_clock() {\n    getOffset()\n        .then(o => offset = o) // wtf don't set a global variable in async code like this\n        .then(() => console.log('offset found: ', offset))\n        .catch(() => console.log('getOffset() failed'));\n}\n\ninit_clock();\n\nfunction date() {\n    let d = new Date();\n    d.setTime(d.getTime() + offset);\n    return d;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nconst targetDate = new Date(2024, 0, 1, 0, 0, 0, 0); // why the fuck are months 0-indexed?\nlet lastSTo = -1000;\nfunction update_countdown() {\n\tlet msTo = targetDate - date();\n\tlet sTo = ~~(msTo / 1000);\n\n    fireworks.update_countdown(sTo);\n\t\n\tif (lastSTo != 0) {\n\t\tsetTimeout(update_countdown, 250);\n\t}\n\tlastSTo = sTo;\n}\n\nsetTimeout(update_countdown, 250);\n\n\n\n//# sourceURL=webpack:///./index.js?");

/***/ })

}]);